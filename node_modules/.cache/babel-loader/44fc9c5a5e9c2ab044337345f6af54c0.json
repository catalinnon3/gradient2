{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Gradient\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Gradient\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Gradient\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Gradient\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Gradient\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Gradient\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Gradient\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Gradient\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Gradient\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import bridge from'@vkontakte/vk-bridge';import'@vkontakte/vkui/dist/vkui.css';import'./css/App.css';import html2canvas from'html2canvas';import{Panel,Title,Footer,View,SimpleCell,ScreenSpinner,Avatar,Button,Snackbar}from'@vkontakte/vkui';import Icon28StoryOutline from'@vkontakte/icons/dist/28/story_outline';import Lottie from'react-lottie';import animationDataBackground from'./animations/background.json';import animationDataWaves from'./animations/wave.json';import animationDataLoading from'./animations/loading2.json';import{Upload}from\"./components/Upload\";import stars from'./img/stars.png';import ru from'./img/ru.png';import ukr from'./img/ukr.png';import cn from'./img/cn.png';import it from'./img/it.png';import bel from'./img/bel.png';import brit from'./img/brit.png';import germ from'./img/germ.png';import grez from'./img/grez.png';import belg from'./img/belg.png';import as from'./img/as.png';import jm from'./img/jm.png';import sz from'./img/sz.png';import pl from'./img/pl.png';import bulg from'./img/bulg.png';import isr from'./img/isr.png';import france from'./img/france.png';import kz from'./img/kz.png';import us from'./img/us.png';import spain from'./img/spain.png';import ph from'./img/ph.png';import sd from'./img/sd.png';import ml from'./img/ml.png';import am from'./img/am.png';import ire from'./img/ire.png';import den from'./img/den.png';import braz from'./img/braz.png';import jp from'./img/jp.png';import ch from'./img/ch.png';import leb from'./img/leb.png';import arab from'./img/arab.png';import afr from'./img/afr.png';import zb from'./img/zb.png';import arg from'./img/arg.png';import ind from'./img/ind.png';import eg from'./img/eg.png';import kor from'./img/kor.png';import mex from'./img/mex.png';import downwards_black_arrow from'./img/downwards-black-arrow.png';var random=require('random');var app_id=7554927,group_id=197570628;var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.state={popout:null,activePanel:'main',scheme:'bright_light',can_generate:true};_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.go=_this.go.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this2=this;var user;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:bridge.subscribe(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$detail,type,data,schemeAttribute;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;if(type!==undefined)console.log(type,data);if(type==='VKWebAppUpdateConfig'){schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=false?data.scheme?data.scheme:'bright_light':'bright_light';document.body.attributes.setNamedItem(schemeAttribute);_this2.setState({scheme:schemeAttribute.value});}case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());_context2.next=3;return bridge.sendPromise('VKWebAppGetUserInfo');case 3:user=_context2.sent;this.setState({photo:user.photo_max_orig,name:user.first_name+' '+user.last_name});_context2.next=7;return bridge.send('VKWebAppInit');case 7:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"go\",value:function go(panel){this.setState({activePanel:panel});}},{key:\"sleep\",value:function sleep(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}},{key:\"uploadFile\",value:function(){var _uploadFile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(element,evt){var _this3=this;var tgt,files,t,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_loop,_iterator,_step;return _regeneratorRuntime.wrap(function _callee5$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:tgt=evt.target||window.event.srcElement,files=tgt.files;t=this;if(!(FileReader&&files&&files.length)){_context6.next=30;break;}_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context6.prev=6;_loop=/*#__PURE__*/_regeneratorRuntime.mark(function _loop(){var file,fr;return _regeneratorRuntime.wrap(function _loop$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:file=_step.value;fr=new FileReader();fr.onload=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this5=this;var res,image;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:res=fr.result;//base64 result, to get src -> array[0].props.src\nif(file.type.includes('image')){image=new Image();image.src=res;image.onload=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this4=this,_t$setState;var canvas,ctx,percents,p4,p3,p2,p1,country,c1,c2,c3,c4;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return bridge.send('VKWebAppAllowMessagesFromGroup',{group_id:group_id,key:'fsdgeruiogj'});case 3:_context3.next=9;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);this.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this4.setState({snackbar:null});}},\"\\u041D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0440\\u0430\\u0437\\u0440\\u0435\\u0448\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439\")});return _context3.abrupt(\"return\");case 9:canvas=document.createElement('CANVAS'),ctx=canvas.getContext('2d');canvas.height=720;canvas.width=720;ctx.drawImage(image,0,0,image.width,image.height,0,0,720,720);t.setState((_t$setState={},_defineProperty(_t$setState,element,res),_defineProperty(_t$setState,\"can_generate\",true),_t$setState));this.setState({loading:true});setTimeout(function(){_this4.setState({loading:false});},2200);percents=100;p4=random.int(1,4);percents-=p4;p3=random.int(6,13);percents-=p3;p2=random.int(25,41);percents-=p2;p1=percents;country=[[['Россия',ru],['Украина',ukr],['Канада',cn],['Италия',it],['Белорусия',bel],['Британия',brit],['Германия',germ],['Греция',grez]],[['Бельгия',belg],['Австрия',as],['Ямайка',jm],['Швейцария',sz],['Польша',pl],['Болгария',bulg],['Израиль',isr],['Франция',france],['Казахстан',kz],['США',us],['Испания',spain]],[['Филлипины',ph],['Швеция',sd],['Молдавия',ml],['Армения',am],['Ирландия',ire],['Дания',den],['Бразилия',braz]],[['Япония',jp],['Китай',ch],['Ливан',leb],['Саудовская Аравия',arab],['Африка',afr],['Зимбабве',zb],['Аргентина',arg],['Индия',ind],['Египет',eg],['Корея',kor],['Мексика',mex]]];c1=country[0][random.int(0,country[0].length-1)];c2=c1===country[0][0]?country[1][random.int(0,country[1].length-1)]:country[0][0];c3=country[2][random.int(0,country[2].length-1)];c4=country[3][random.int(0,country[3].length-1)];this.setState({p1:p1,p2:p2,p3:p3,p4:p4,c1:c1,c2:c2,c3:c3,c4:c4,can_generate:false});case 30:case\"end\":return _context3.stop();}}},_callee3,this,[[0,5]]);})).bind(this);}else{this.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this5.setState({snackbar:null});}},\"\\u041D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\")});}case 2:case\"end\":return _context4.stop();}}},_callee4,this);})).bind(_this3);_context5.next=5;return fr.readAsDataURL(file);case 5:case\"end\":return _context5.stop();}}},_loop);});_iterator=files[Symbol.iterator]();case 9:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context6.next=14;break;}return _context6.delegateYield(_loop(),\"t0\",11);case 11:_iteratorNormalCompletion=true;_context6.next=9;break;case 14:_context6.next=20;break;case 16:_context6.prev=16;_context6.t1=_context6[\"catch\"](6);_didIteratorError=true;_iteratorError=_context6.t1;case 20:_context6.prev=20;_context6.prev=21;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}case 23:_context6.prev=23;if(!_didIteratorError){_context6.next=26;break;}throw _iteratorError;case 26:return _context6.finish(23);case 27:return _context6.finish(20);case 28:_context6.next=30;break;case 30:case\"end\":return _context6.stop();}}},_callee5,this,[[6,16,20,28],[21,,23,27]]);}));function uploadFile(_x2,_x3){return _uploadFile.apply(this,arguments);}return uploadFile;}()},{key:\"viewportToPixels\",value:function viewportToPixels(value){var parts=value.match(/([0-9\\.]+)(vh|vw)/);var q=Number(parts[1]);var side=window[['innerHeight','innerWidth'][['vh','vw'].indexOf(parts[2])]];return side*(q/100);}},{key:\"render\",value:function render(){var _this6=this;return React.createElement(View,{activePanel:this.state.activePanel,popout:this.state.popout},React.createElement(Panel,{id:\"main\"},React.createElement(Upload,{onChange:/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e){return _regeneratorRuntime.wrap(function _callee6$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_this6.uploadFile('photo',e);case 1:case\"end\":return _context7.stop();}}},_callee6);}));return function(_x4){return _ref5.apply(this,arguments);};}()},React.createElement(\"div\",{style:{background:'white',height:'40vh'}},React.createElement(\"div\",{style:{paddingTop:'calc(6vh + var(--safe-area-inset-top))'}},React.createElement(Avatar,{crossOrigin:'anonymous',shadow:false,size:this.viewportToPixels('28vh'),mode:\"app\",src:this.state.photo,className:\"centered\",style:{borderRadius:'2vh'}}),false&&React.createElement(Title,{level:\"1\",weight:\"medium\",className:\"centered\",style:{marginTop:16}},this.state.name)))),React.createElement(\"div\",{style:{borderTopLeftRadius:'5vh',borderTopRightRadius:'5vh',height:'60vh',background:'#1d1b26'}},this.state.loading?React.createElement(\"div\",{className:\"absolute_centered\"},React.createElement(Lottie,{className:\"absolute_centered animated-loading\",style:{pointerEvents:'none',zIndex:-1,transform:'translateY(4vh)'},options:{loop:true,autoplay:true,animationData:animationDataLoading,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}},height:'100px',width:'100px'})):this.state.can_generate?React.createElement(Lottie,{className:\"absolute_centered\",style:{pointerEvents:'none',zIndex:-1,transform:'translateY(4vh)'},options:{loop:true,autoplay:true,animationData:animationDataBackground,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}},height:'45vh'}):React.createElement(\"div\",{style:{width:'100vw',height:'60vh',backgroundImage:\"url(\".concat(stars,\")\"),backgroundRepeat:'repeat',opacity:.3}}),!this.state.loading&&React.createElement(\"div\",{className:\"absolute_centered animated-loading\",style:{width:'100vw'}},this.state.can_generate?React.createElement(Upload,{onChange:/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e){return _regeneratorRuntime.wrap(function _callee7$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_this6.uploadFile('photo',e);case 1:case\"end\":return _context8.stop();}}},_callee7);}));return function(_x5){return _ref6.apply(this,arguments);};}()},React.createElement(Title,{style:{color:'white',textAlign:'center'},level:\"3\",weight:\"medium\"},\"\\u0427\\u0442\\u043E\\u0431\\u044B \\u0443\\u0437\\u043D\\u0430\\u0442\\u044C, \\u043A\\u0442\\u043E \\u0432\\u044B \\u043F\\u043E \\u043D\\u0430\\u0446\\u0438\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438, \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u0435 \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u044E, \\u0433\\u0434\\u0435 \\u0445\\u043E\\u0440\\u043E\\u0448\\u043E \\u0432\\u0438\\u0434\\u043D\\u043E \\u0432\\u0430\\u0448\\u0435 \\u043B\\u0438\\u0446\\u043E\"),React.createElement(\"div\",{className:\"centered\",style:{marginTop:'16px'}},React.createElement(Button,{size:'l',mode:\"overlay_secondary\"},\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\"))):React.createElement(\"div\",{style:{position:'absolute',top:'-5vh',left:'50%',transform:'translateX(-50%)',width:'80vw'}},React.createElement(\"div\",{className:\"centered\"},React.createElement(\"img\",{crossOrigin:'anonymous',src:this.state.c1[1],height:32}),React.createElement(SimpleCell,{style:{height:'6vh',background:'linear-gradient(90deg, #ffffff00, #e64646)',width:'70vw'},disabled:true,indicator:React.createElement(Title,{level:2,weight:\"medium\",style:{color:'white'}},this.state.p1,\"%\")},React.createElement(Title,{level:2,weight:\"medium\",style:{color:'white',display:'flex',alignItems:'center'}},this.state.c1[0]))),React.createElement(\"div\",{className:\"centered\",style:{marginTop:'1.5vh'}},React.createElement(\"img\",{crossOrigin:'anonymous',src:this.state.c2[1],height:32}),React.createElement(SimpleCell,{style:{height:'6vh',background:'linear-gradient(90deg, #ffffff00, #e64646)',width:'70vw'},disabled:true,indicator:React.createElement(Title,{level:2,weight:\"medium\",style:{color:'white'}},this.state.p2,\"%\")},React.createElement(Title,{level:2,weight:\"medium\",style:{color:'white',display:'flex',alignItems:'center'}},this.state.c2[0]))),React.createElement(\"div\",{className:\"centered\",style:{marginTop:'1.5vh'}},React.createElement(\"img\",{crossOrigin:'anonymous',src:this.state.c3[1],height:32}),React.createElement(SimpleCell,{style:{height:'6vh',background:'linear-gradient(90deg, #ffffff00, #e64646)',width:'70vw'},disabled:true,indicator:React.createElement(Title,{level:2,weight:\"medium\",style:{color:'white'}},this.state.p3,\"%\")},React.createElement(Title,{level:2,weight:\"medium\",style:{color:'white',display:'flex',alignItems:'center'}},this.state.c3[0]))),React.createElement(\"div\",{className:\"centered\",style:{marginTop:'1.5vh'}},React.createElement(\"img\",{crossOrigin:'anonymous',src:this.state.c4[1],height:32}),React.createElement(SimpleCell,{style:{height:'6vh',background:'linear-gradient(90deg, #ffffff00, #e64646)',width:'70vw'},disabled:true,indicator:React.createElement(Title,{level:2,weight:\"medium\",style:{color:'white'}},this.state.p4,\"%\")},React.createElement(Title,{level:2,weight:\"medium\",style:{color:'white',display:'flex',alignItems:'center'}},this.state.c4[0]))),this.state.screen?React.createElement(Footer,null,React.createElement(Title,{level:2,weight:\"semibold\",style:{color:'white'}},\"\\u041F\\u0435\\u0440\\u0435\\u0445\\u043E\\u0434\\u0438 \\u0432 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u0443\\u0437\\u043D\\u0430\\u0442\\u044C \\u0441\\u0432\\u043E\\u044E \\u043D\\u0430\\u0446\\u0438\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C\",React.createElement(\"br\",null),React.createElement(\"img\",{crossOrigin:'anonymous',style:{marginTop:'12px'},height:\"26px\",src:downwards_black_arrow}),React.createElement(\"img\",{crossOrigin:'anonymous',style:{marginLeft:'8px'},height:\"26px\",src:downwards_black_arrow}),React.createElement(\"img\",{crossOrigin:'anonymous',style:{marginLeft:'8px'},height:\"26px\",src:downwards_black_arrow}))):React.createElement(Footer,null,React.createElement(\"span\",{style:{color:'white',opacity:.5}},\"\\u0427\\u0442\\u043E\\u0431\\u044B \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E, \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\u043D\\u0430 \\u0441\\u0432\\u043E\\u0439 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\")))),!this.state.loading&&!this.state.can_generate&&!this.state.screen&&React.createElement(\"div\",{style:{position:'absolute',bottom:'1vh',width:'100vw',zIndex:1}},React.createElement(Button,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var element;return _regeneratorRuntime.wrap(function _callee9$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_this6.setState({popout:React.createElement(ScreenSpinner,null),screen:true});_context10.next=3;return _this6.sleep(250);case 3:element=document.getElementsByClassName('View__panels')[0];html2canvas(element,{allowTaint:true}).then(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(canvas){var blob;return _regeneratorRuntime.wrap(function _callee8$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:blob=canvas.toDataURL('image/png');_context9.prev=1;_context9.next=4;return bridge.send('VKWebAppShowStoryBox',{background_type:'image',blob:blob,attachment:{url:'https://vk.com/app'+app_id,text:'open',type:'url'}});case 4:_this6.setState({shared:true});_context9.next=9;break;case 7:_context9.prev=7;_context9.t0=_context9[\"catch\"](1);case 9:_this6.setState({popout:null,screen:false});case 10:case\"end\":return _context9.stop();}}},_callee8,null,[[1,7]]);}));return function(_x6){return _ref8.apply(this,arguments);};}());case 5:case\"end\":return _context10.stop();}}},_callee9);})),style:{background:'#ffffff00',color:'white',fontSize:'20px',letterSpacing:'1px'},before:React.createElement(Icon28StoryOutline,null),size:\"xl\"},\"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0432 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438\")),React.createElement(Lottie,{style:{position:'absolute',bottom:0,pointerEvents:'none'},options:{loop:true,autoplay:true,animationData:animationDataWaves,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}},height:'45vh',width:'100vw'}),this.state.snackbar)));}}]);return App;}(React.Component);export default App;","map":null,"metadata":{},"sourceType":"module"}